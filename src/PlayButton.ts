import { adaptState, html } from "promethium-js";
import { shadow } from "./app.module.css";
import { isPlaying, setIsPlaying, type } from "./globals";
import { song } from "./globals";

const Play = html`
  <svg
    width="40"
    height="40"
    viewBox="0 0 20 24"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
  >
    <path
      fill-rule="evenodd"
      clip-rule="evenodd"
      d="M1.63199 5.61289L3.18167 1.28418L4.80927 1.17163L12.9386 5.83798L17.0855 9.25767L18.7737 12.383L16.7219 15.6468L12.1854 19.2397L7.13811 22.0533L3.53663 22.971L1.95232 20.9192L1 9.21438"
      fill="white"
    />
    <path
      fill-rule="evenodd"
      clip-rule="evenodd"
      d="M1.63199 5.61286C2.16009 4.86832 1.95232 0.0374794 4.80927 1.1716C7.66622 2.29707 18.9901 8.75551 18.7737 12.383C18.5659 16.0191 6.49747 23.4991 3.53663 22.971C0.575786 22.4429 1.42421 11.4999 1 9.21435M1.63199 5.61286C2.16009 4.86832 1.95232 0.0374794 4.80927 1.1716C7.66622 2.29707 18.9901 8.75551 18.7737 12.383C18.5659 16.0191 6.49747 23.4991 3.53663 22.971C0.575786 22.4429 1.42421 11.4999 1 9.21435"
      fill="white"
    />
    <path
      d="M1.63199 5.61286C2.16009 4.86832 1.95232 0.0374794 4.80927 1.1716C7.66622 2.29707 18.9901 8.75551 18.7737 12.383C18.5659 16.0191 6.49747 23.4991 3.53663 22.971C0.575786 22.4429 1.42421 11.4999 1 9.21435M1.63199 5.61286C2.16009 4.86832 1.95232 0.0374794 4.80927 1.1716C7.66622 2.29707 18.9901 8.75551 18.7737 12.383C18.5659 16.0191 6.49747 23.4991 3.53663 22.971C0.575786 22.4429 1.42421 11.4999 1 9.21435"
      stroke="#1D2021"
      stroke-width="2"
      stroke-linecap="round"
    />
  </svg>
`;

const Pause = html`<svg
  width="35"
  height="35"
  viewBox="0 0 21 20"
  fill="none"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M2.69223 1.93205L4.46082 1.30914L5.4857 1.37974L6.22034 5.68198L5.06849 17.592L4.1978 18.788L3.05502 18.9417L1.94851 18.1942L1.21387 16.6867L1.5041 2.83735"
    fill="white"
  />
  <path
    d="M2.69219 1.93203C3.26358 2.03585 5.70333 -0.0446773 6.1024 2.5674C6.50146 5.17532 5.87565 15.2374 5.06845 17.592C4.25218 19.9466 1.80336 19.1451 1.21383 16.6867C0.615228 14.2283 1.45871 5.14625 1.50406 2.83733M2.69219 1.93203C3.26358 2.03585 5.70333 -0.0446773 6.1024 2.5674C6.50146 5.17532 5.87565 15.2374 5.06845 17.592C4.25218 19.9466 1.80336 19.1451 1.21383 16.6867C0.615228 14.2283 1.45871 5.14625 1.50406 2.83733"
    stroke="#1D2021"
    stroke-width="2"
    stroke-linecap="round"
  />
  <path
    fill-rule="evenodd"
    clip-rule="evenodd"
    d="M17.6931 18.3519L15.9608 18.9084L14.945 18.8004L14.029 14.5231L14.7273 2.72096L15.6343 1.38378L16.9131 1.00173L18.1738 1.53743L19.0264 2.93691L18.8813 17.2805"
    fill="white"
  />
  <path
    d="M17.6929 18.3519C17.1215 18.2273 14.7725 20.2082 14.2827 17.6044C13.7929 14.9965 13.9381 5.16697 14.7271 2.721C15.5162 0.279189 18.3369 0.511743 19.0262 2.93694C19.7155 5.36215 18.9083 14.8927 18.881 17.2805M17.6929 18.3519C17.1215 18.2273 14.7725 20.2082 14.2827 17.6044C13.7929 14.9965 13.9381 5.16697 14.7271 2.721C15.5162 0.279189 18.3369 0.511743 19.0262 2.93694C19.7155 5.36215 18.9083 14.8927 18.881 17.2805"
    stroke="#1D2021"
    stroke-width="2"
    stroke-linecap="round"
  />
</svg>`;

const PlayButton = () => {
  const [started, setStarted] = adaptState(false);

  return () => html`
    <button
      class="bg-red-400 rounded-full w-[100px] h-[100px] my-10 ${shadow}
             flex justify-center items-center outline-none border-4 border-[#1D2021]
             "
      @click=${() => {
        if (!started()) {
          setIsPlaying(true);
          setTimeout(() => {
            type();
          }, 1000);
        } else {
          setIsPlaying(!isPlaying());
          if (isPlaying()) type();
        }
        if (!started()) {
          song.play();
          setStarted(true);
        }
      }}
    >
      ${!isPlaying() ? Play : Pause}
    </button>
  `;
};

export default PlayButton;
